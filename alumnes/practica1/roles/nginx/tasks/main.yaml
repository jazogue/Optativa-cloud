- name: GIT
  yum: 
    name: git
    state: present

- name: EPEL
  yum: 
    name: epel-release
    state: present

- name: nginx
  yum: 
    name: nginx
    state: present

- name: Clone repo
  ansible.builtin.git:
    repo: https://github.com/Josep-Andreu/Optativa-cloud.git
    clone: yes
    update: yes
    dest: ./files

- name: Copy index.html
  ansible.builtin.copy:
    src: ./files/index.html
    dest: /usr/share/nginx/html/index.html
    remote_src: true

- name: Making it accessible
  firewalld:
    service: http
    permanent: yes
    immediate: yes
    state: enabled

- name: Restart service nginx 
  service: name=nginx state=restarted enabled=yes